<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta name="format-detection" content="telephone=no">

	<title>Talent Fly :: New User Full Profile</title>

	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="mask-icon" href="safari-pinned-tab.svg" color="#469aeb">
	<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
	<link rel="icon" type="image/png" sizes="256x256" href="android-chrome-256x256.png">
	<link rel="manifest" href="site.webmanifest">
	<meta name="msapplication-TileColor" content="#469aeb">
	<meta name="msapplication-config" content="browserconfig.xml">
	<meta name="theme-color" content="#469aeb">

	<link rel="stylesheet" href="css/bundle.min.css">

	<!-- editor -->
	<script src="https://cdn.ckeditor.com/4.9.1/basic/ckeditor.js"></script>
	<script src="js/lib/jquery.min.js"></script>

	<!-- <script src="/js/plugins/ckeditor.js"></script> -->

</head>
<body>

	#=include includes/header-typical.html

	<main>


		<section class="section section-xs collapsed-bottom">
			<div class="container large">

				<div class="row">
					<div class="col-xs-12 col-md-2 col-lg-3">
						<div class="section-title middle with-element" id="btnPositionTablet">Full Profile</div>
					</div>

					
					<div class="col-xs-12 col-md-10 col-lg-9">
						#=include includes/progress.html
					</div>
				</div>

				#=include includes/overview-head-edited.html

				#=include includes/overview-body-demo.html

				<!-- cards row-->
				<div class="row card-row top-xs profile-main">
					<!-- left side -->
					<div class="col-xs-12 col-md-8 offset-bottom main-info">
						<!-- Summary -->
						#=include includes/summary-empty.html
						<!-- / Summary -->

						<!-- Technical Skills -->
						#=include includes/technical-skills-empty.html
						<!-- / Technical Skills -->

						<!-- Soft Skills -->
						#=include includes/soft-skills-empty.html
						<!-- / Soft Skills -->

						<!-- Experience -->
						#=include includes/experience-empty.html
						<!-- / Experience -->

						<!-- Education -->
						#=include includes/education-empty.html
						<!-- / Education -->

						<!-- Certification -->
						#=include includes/certification-empty.html
						<!-- / Certification -->

						<!-- Languages -->
						#=include includes/languages-empty.html
						<!-- / Languages -->

						<!-- Recommendations &amp; Endorsements -->
						#=include includes/recommendations-empty.html
						<!-- / Recommendations &amp; Endorsements -->

						<!-- Interests, Hobbies & Links -->
						#=include includes/interests-empty.html
						<!-- / Interests, Hobbies & Links -->

						<!-- Volunteering Experience -->
						#=include includes/volunteering-empty.html
						<!-- / Volunteering Experience -->
					</div>
					<!-- / left side -->


					<!-- right side -->
					<div class="col-xs-12 col-md-4 offset-bottom fixed-parent tips-info">
						#=include includes/building-tips.html
					</div>
					<!-- / right side -->
				</div>
			</section>
			<div id="preloader" class="preloader hidden">
				<div id="loader"></div>
			</div>
		</main>

		
		<!-- popup -->
		#=include includes/popup-interview.html

		<!-- edit popup -->
		#=include includes/popup-video-request.html
		#=include includes/popup-edit-summary.html
		#=include includes/popup-edit-technicalskills.html
		#=include includes/popup-edit-softskills.html
		#=include includes/popup-edit-experience.html
		#=include includes/popup-edit-education.html
		#=include includes/popup-edit-volunteering.html
		#=include includes/popup-edit-head.html
		#=include includes/popup-edit-certification.html
		#=include includes/popup-edit-languages.html
		#=include includes/popup-edit-interests.html
		#=include includes/popup-share-profile.html
		#=include includes/popup-recomendation-active.html
		#=include includes/popup-crop-photo.html


		<!-- UPDATE PROFILE POPUPS -->
		#=include includes/popup-update-profile-linkedin.html 
		#=include includes/popup-update-profile-cv.html 
		#=include includes/popup-general-update-profile.html


		<!-- main footer -->
		#=include includes/footer.html


		<link href="https://fonts.googleapis.com/css?family=Poppins:100,300,400,500,600,700" rel="stylesheet">


		<script>
			/* переменные для выпадающих списков в формах**/
			var currentTime, currentYear, endTime;
			currentTime = new Date;
			currentYear = currentTime.getFullYear();

			used = [];
			endTime = 1950;
			var repeat = currentYear - endTime;
			used.push(endTime)

			for (i = 1; i < repeat + 1; i++) {
				used.push(parseInt(used.slice(0,1)) + i);
			}
			used.reverse()

			var countries, degrees, months, proficiencies, softSkills, techSkills, used;

			months = ['January', 'Fabuary', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

			countries = ['Austria', 'USA', 'France', 'Germany', 'England', 'Ukraine', 'China'];

			techSkills = ['Project Management', 'Communication', 'Interfaces', 'Code', 'Visual Design', 'Other'];

			softSkills = {
				"Professional skills": ['Communication', 'Teamwork'],
				"Interpersonal skills": ['Courtesy', 'Positive attitude', 'Responsibility'],
				"Other skills": ['Integrity', 'Work ethic']
			};

			degrees = ['Bachelor of Science', 'Master of Science', 'Student'];

			proficiencies = ['Elementary', 'Limited', 'Professional', 'Native'];
		</script>

		<script>
			window.modalOnSubmit = function(e, data) {
				$.ajax({
					url: $(this)('[data-onsubmit]').attr('action'),
					dataType: 'json',
					type: 'get',
					// headers: {
					// 	'X-CSRFToken': csrf_token
					// },
					error: function(data, textStatus, errorThrown) {
						console.log(errorThrown);
					},
					success: function(data) {
						console.log('forms data send');
						showCaption(data[0].progress.percent, data[0].progress.active);
						$('.progress-bar').each(function(i, bar){
							$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
							setWidth(bar)
						});
						location.reload();
					}
				});
				e.preventDefault();
			}
		</script>

		<script>
			/*функция ссылается на this формы, [e] - событие submit, [data] - объект с данными из формы*/
			$(document).on('click', '[data-edit]', function(e) {
				var multiForms = ['#languages-list', '#technicalskills-list'];
				if ($.inArray($(this).data('edit'), multiForms) === -1) {
					var editBlock;
					if (typeof $(this).attr('href') === 'undefined') {
						editBlock = $($(this).attr('data-call-popup'));
					} else {
						editBlock = $($(this).attr('href'));
					}
					if (typeof $(this).data('id') !== 'undefined') {
						$('form', editBlock).data('id', $(this).data('id'));
					} else {
						$('form', editBlock).data('id', 0);
					}
				}
			});
			$(document).on('click', '[data-removeon]', function(e){
				var form = $(this).parents('form'),
				url = form.attr('action');
				console.log(form);
				console.log(form.data('id'));
				if($(this).parents('#edit-experience-popup')){
					console.log('exp.remove')
				};
				$.ajax({
					url: form.attr('action'),
					type: 'get',
					data: {'id': form.data('id'), 'action': 'delete'},
					dataType: 'json',
					// headers: {
					// 	'X-CSRFToken': csrf_token
					// },
					error: function(data, textStatus, errorThrown) {
						console.log(errorThrown);
					},
					success: function(data) {
						console.log(data);
						showCaption(data[0].progress.percent, data[0].progress.active);
						$('.progress-bar').each(function(i, bar){
							$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
							setWidth(bar)
						});
					}
				});
			});
				// General handler popup
				window.modalOnSubmitGeneral = function(e, data) {
					console.log(data);
					if (cropedUserPhoto == 'remove_image') {
						$('#userPhoto').addClass('hidden');
					}
					$.ajax({
						url: $(this).attr('action'),
						type: 'post',
						data: {
							'first_name': data['personFName'],
							'second_name': data['personLastName'],
							'middle_name': data['personMName'],
							'email': data['personEmail'],
							'country': data['countryMainInfo'],
							'city': data['personCity'],
							'state': data['personLocation'],
							'cellphone': data['personPhone'],
							'profile_title': data['personTitle'],
							'cropped_image': cropedUserPhoto
						},
						dataType: 'json',
						headers: {
							'X-CSRFToken': csrf_token
						},
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data).length > 0) {
								console.log(data);
								console.log(data.progress.percent);
								$('.progress-bar').each(function(i, bar){
									$(bar).data('complete', data.progress.percent).attr('data-complete', data.progress.percent)
									setWidth(bar)
								});
								showCaption(data.progress.percent, data.progress.active);

								if($('#profileImage').find('img').hasClass('hidden')){
									$('figure.icon-figure img').addClass('hidden');
								} else {
									$('figure.icon-figure img').removeClass('hidden');
								}
								if (cropedUserPhoto) {
									
									if ($('figure.icon-figure img').length > 0) {
										$('figure.icon-figure img').attr('src', 'data:image/png;base64,' + cropedUserPhoto);
									} else {
										$('figure.icon-figure').append('<img src="data:image/png;base64,' + cropedUserPhoto + '" alt="">');
									}
								}
												// TODO: make errors
											}

											let parent = document.querySelector('.user-name .inner');
											parent.innerHTML = '';
											let template = '';
											template += `<span id="userFNameEdit" data-change="#personFName">${data.user['first_name']} </span>
											<span id="userMidNameEdit" data-change="#personMName">${data.user['middle_name']} </span>
											<span id="userLNameEdit" data-change="#personLastName">${data.user['second_name']}</span>`;
											parent.insertAdjacentHTML('afterbegin', template);
											
											parent = document.querySelector('.user-name');
											let pos = document.querySelector('.user-name .position');
											$(pos).remove();
											template = '';
											template += `<span class="position" id="userTitleEdit" data-change="#personTitle">${data.user['profile_title']}</span>`
											parent.insertAdjacentHTML('beforeend', template);

											parent = document.querySelector('.contacts-list');
											parent.innerHTML = '';
											template = '';
											template += `<li class="place">`;                               
											template += data.user['country'] || data.user['city'] || data.user['state'] ? `<i class="icon icon-maps"></i>` : `<i class="icon icon-maps hidden"></i>`;
											template += `<span id="userCountryEdit" data-change="#countryMainInfo">${data.user['country']}</span>
											<span id="userCityEdit" data-change="#personCity">${data.user['city']}</span>
											<span id="userLocationEdit" data-change="#personLocation">${data.user['state']}</span>
											</li>
											<li>
											<i class="icon icon-email"></i>
											<span id="userMailEdit" data-change="#personEmail">${data.user['email']}</span>
											</li>
											<li>`
											template += data.user['cellphone'] ? `<i class="icon icon-telephone"></i>` : `<i class="icon icon-telephone hidden"></i>`; 
											template += `<span id="userPhoneEdit" data-change="#personPhone">${data.user['cellphone']}</span>
											</li>`

											parent.insertAdjacentHTML('afterbegin', template);

											var places;
											places = document.querySelectorAll('.contacts-list .place');
											commaSeparate(places);


										}
									});

e.preventDefault();
};
				// Image crop popup
				window.modalOnSubmitGeneralImage = function(e, data) {
					$.ajax({
						url: $(this).attr('action'),
						type: 'post',
						data: {
							'cropped_image': data['cropOutput']
						},
						dataType: 'json',
						headers: {
							'X-CSRFToken': csrf_token
						},
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(d) {
							if (Object.keys(d).length > 0) {
								console.log(d);
												// TODO: make errors
											}
											showCaption(data[0].progress.percent, data[0].progress.active);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											if ($('figure.icon-figure img').length > 0) {
												$('figure.icon-figure img').attr('src', 'data:image/png;base64,' + data['cropOutput']);
											} else {
												$('figure.icon-figure').append('<img src="data:image/png;base64,' + data['cropOutput'] + '" alt="">');
											}
										}
									});

					e.preventDefault();
				};

				// Summary handler popup
				window.modalOnSubmitSummary = function(e, data) {
					$.ajax({
						url: $(this).attr('action'),
						type: 'get',
						data: {'summary': data['summaryEdit']},
						dataType: 'json',
						// headers: {
						// 	'X-CSRFToken': csrf_token
						// },
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data).length > 0) {
													// TODO: make errors
												}
												$('.progress-bar').each(function(i, bar){
													$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
													setWidth(bar)
												});
												showCaption(data[0].progress.percent, data[0].progress.active);
											}
										});

					e.preventDefault();
					hidePopups();
				};
				// Experience handler popup
				window.modalOnSubmitExperience = function(e, data) {
					// var elemId = parseInt($(this).data('id'));
					var elemId = parseInt($($(this).attr('data-on-edit')).data('id'));
					console.log($(this).attr('data-on-edit'));
					console.log(elemId);
					var postData = {
						'title': data['jobTitle'],
						'company': data['companyName'],
						'city': data['city'],
						'state': data['location'],
						'country': data['CountryExp'],
						'description': data['descriptionEdit'],
						'start_year': data['yearBefore'],
						'start_month': data['monthBefore'],
						'end_year': data['afterYear'],
						'end_month': data['monthAfter'],
						'current_work': data['presExp']
					};
					if (elemId > 0) {
						postData['id'] = elemId;
					}
					$.ajax({
						url: $(this).attr('action'),
						type: 'get',
						data: postData,
						dataType: 'json',
						// headers: {
						// 	'X-CSRFToken': csrf_token
						// },
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data[0].errors).length > 0) {
								console.log(data[0].errors);
												// TODO: make errors
											}
											console.log(data[0].progress.percent);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);
											if (elemId === 0) {
												setTimeout((function() {
														// wait till element up on page -_-
														$('[data-edit^="#experienceInfo"]').last().data('id', data.id);
													}), 500);
											}
										}
									});

					e.preventDefault();
				};
				// Education handler popup
				window.modalOnSubmitEducation = function(e, data) {
					var elemId = parseInt($(this).data('id'));
					var postData = {
						'institution': data['institutionName'],
						'field_study': data['fieldOfStudy'],
						'degree': data['studyDegree'],
						'city': data['educationCity'],
						'state': data['educationLocation'],
						'country': data['CountryEd'],
						'start_year': data['educStartYear'],
						'start_month': data['educStartMonth'],
						'end_year': data['educEndYear'],
						'end_month': data['educEndMonth'],
						'current_educate': data['presEduc']
					};
					if (elemId > 0) {
						postData['id'] = elemId;
					}
					$.ajax({
						url: $(this).attr('action'),
						type: 'get',
						data: postData,
						dataType: 'json',
						// headers: {
						// 	'X-CSRFToken': csrf_token
						// },
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data[0].errors).length > 0) {
								console.log(data[0].errors);
												// TODO: make errors
											}
											console.log(data[0].progress.percent);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);
											if (elemId === 0) {
												setTimeout((function() {
														// wait till element up on page -_-
														$('[data-edit^="#educationInfo"]').last().data('id', data.id);
													}), 500);
											}
										}
									});

					e.preventDefault();
				};
// Certificate handler popup

window.modalOnSubmitCertificate = function(e, data) {
	var elemId = parseInt($(this).data('id'));
	var form_data = new FormData(this);
	if (elemId > 0) {
		form_data.append('id', elemId);
	}
	$.ajax({
		url: $(this).attr('action'),
		type: 'get',
		data: form_data,
		contentType: false,
		processData: false,
						// headers: {
						// 	'X-CSRFToken': csrf_token
						// },
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data[0].errors).length > 0) {
								console.log(data[0].errors);
												// TODO: make errors
											}
											
											console.log(data[0].certificate_img);
											
											setTimeout((function() {
														// wait till element up on page -_-
														$('#certificationMore').children().last().find('.image-cover').children('img').attr('src', data[0].certificate_img);
													}), 100);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);

											if (elemId === 0) {
												setTimeout((function() {
														// wait till element up on page -_-
														$('[data-edit^="#certificationInfo"]').last().data('id', data.id);
													}), 500);
											}
										}
									});

	e.preventDefault();
};
				//
				window.modalOnSubmitVolunteering = function(e, data) {
					var elemId = parseInt($(this).data('id'));
					var form_data = new FormData(this);
					if (elemId > 0) {
						form_data.append('id', elemId);
					}
					$.ajax({
						url: $(this).attr('action'),
						type: 'get',
						data: form_data,
						contentType: false,
						processData: false,
						// headers: {
						// 	'X-CSRFToken': csrf_token
						// },
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data[0].errors).length > 0) {
								console.log(data[0].errors);
												// TODO: make errors
											}
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);
											if (elemId === 0) {
												setTimeout((function() {
														// wait till element up on page -_-
														$('[data-edit^="#volInfo"]').last().data('id', data.id);
													}), 500);
											}
										}
									});

					e.preventDefault();
				};
				window.modalOnSubmitTechskills = function(e, data) {
					
					var object = {};
					for (var key in data) {
						var id, name, value = data[key];
						if (key.indexOf('skillTechTitle') !== -1) {
							id = key.replace('skillTechTitle', '');
							name = 'name';
						} else if (key.indexOf('skillYear') !== -1) {
							id = key.replace('skillYear', '');
							name = 'experience';
						} else if (key.indexOf('techY') !== -1) {
							id = key.replace('techY', '');
							name = 'used_year';
						} else if (key.indexOf('selTechY') !== -1) {
							id = key.replace('selTechY', '');
							name = 'used_year';
						} else if (key.indexOf('blockId') !== -1) {
							id = key.replace('blockId', '');
							name = 'id';
							value = parseInt(value.replace('titleChange', ''));
						}
						if (!(id in object)) {
							object[id] = {};
						}
						object[id][name] = value;
					}
					$.ajax({
						url: $(this).attr('action'),
						type: 'get',
						data: JSON.stringify(object),
						dataType: 'json',
						contentType: 'application/json',
						// headers: {
						// 	'X-CSRFToken': csrf_token
						// },
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data[0].errors).length > 0) {
								console.log(data);
												// TODO: make errors
											}
											console.log(data[0].progress.percent);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);

											setTimeout((function() {
												$('#technicalskills-list > li > a').each(function(){
													for (var key in data.skills) {
														var node = $('.title', this).contents()[0];
														if (node.nodeValue === data.skills[key].name) {
															$('.title', this).attr('id', 'titleChange' + data.skills[key].id);
														}
													}
												});
											}), 500);
										}
									});
					e.preventDefault();
				};
				window.modalOnSubmitLanguages = function(e, data) {
					var object = {};
					console.log(data);
					for (var key in data) {
						var id, name, value = data[key];
						if (key.indexOf('lan') !== -1) {
							id = key.replace('lan', '');
							name = 'name';
						} else if (key.indexOf('profL') !== -1) {
							id = key.replace('profL', '');
							name = 'proficiency';
						} else if (key.indexOf('langE') !== -1) {
							id = key.replace('langE', '');
							name = 'id';
						} else if (key.indexOf('blockId') !== -1) {
							id = key.replace('blockId', '');
							name = 'id';
							value = parseInt(value.replace('langE', ''));
						}
						if (!(id in object)) {
							object[id] = {};
						}
						object[id][name] = value;
					}
					$.ajax({
						url: $(this).attr('action'),
						type: 'get',
						data: JSON.stringify(object),
						dataType: 'json',
						contentType: 'application/json',
						// headers: {
						// 	'X-CSRFToken': csrf_token
						// },
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data[0].errors).length > 0) {
								console.log(data);
												// TODO: make errors
											}
											console.log(data[0].progress.percent);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);
											setTimeout((function() {
												$('#languages-list > li > a').each(function(){
													for (var key in data[0].langs) {
														if ($('.title', this).text() === data[0].langs[key].name) {
															$('.title', this).attr('id', 'langE' + data[0].langs[key].id);
														}
													}
												});
											}), 500);
										}
									});
					e.preventDefault();
				};
				window.modalOnSubmitInterests = function(e, data) {
					var object = {};
					for (var key in data) {
						var id, name, value = data[key];
						if (key.indexOf('hobbyCaption') !== -1) {
							id = key.replace('hobbyCaption', '');
							name = 'details';
						} else if (key.indexOf('hobbyLink') !== -1) {
							id = key.replace('hobbyLink', '');
							name = 'link';
						} else if (key.indexOf('hobbyTitle') !== -1) {
							id = key.replace('hobbyTitle', '');
							name = 'name';
						} else if (key.indexOf('lan') !== -1) {
							id = key.replace('lan', '');
							name = 'name';
						} else if (key.indexOf('linkCaption') !== -1) {
							id = key.replace('linkCaption', '');
							name = 'details';
						} else if (key.indexOf('blockId') !== -1) {
							id = key.replace('blockId', '');
							name = 'id';
							value = parseInt(value.replace('interestTitle', ''));
						}
						if (!(id in object)) {
							object[id] = {};
						}
						object[id][name] = value;
					}
					$.ajax({
						url: $(this).attr('action'),
						type: 'get',
						data: JSON.stringify(object),
						dataType: 'json',
						contentType: 'application/json',
						// headers: {
						// 	'X-CSRFToken': csrf_token
						// },
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data[0].errors).length > 0) {
								console.log(data);
												// TODO: make errors
											}
											console.log(data[0].progress.percent);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);
											setTimeout((function() {
												$('#interests-list > li > a').each(function(){
													for (var key in data.interests) {
														if ($('.title', this).text() === data.interests[key].name) {
															$('.title', this).attr('id', 'interestTitle' + data.interests[key].id);
														}
													}
												});
											}), 500);
										}
									});
					e.preventDefault();
				};
				window.modalOnSubmitSoftSkills = function(e, data) {
					var object = {};
					for (var key in data) {
						var id, name;
						if (key.indexOf('softSkillsCTit') !== -1) {
							id = key.replace('softSkillsCTit', '');
							name = 'skill';
						}
						if (key.indexOf('softSkillsCat') !== -1) {
							id = key.replace('softSkillsCat', '');
							name = 'category';
						}
						if (key.indexOf('blockId') !== -1) {
							id = key.replace('blockId', '');
							name = 'id';
						}
						if (name !== 'id') {
							if (!(id in object)) {
								object[id] = {};
							}
							object[id][name] = data[key];
						}
					}
					$.ajax({
						url: $(this).attr('action'),
						type: 'get',
						data: JSON.stringify(object),
						dataType: 'json',
						contentType: 'application/json',
						// headers: {
						// 	'X-CSRFToken': csrf_token
						// },
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data).length > 0) {
								console.log(data);
												// TODO: make errors
											}
											console.log(data[0].progress.percent);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);
										}
									});
					e.preventDefault();
				};
				//
				window.modalOnSubmitVideoRequest = function(e, data) {
					console.log($(this).attr('action'));
					console.log(e);
					console.log(data);

					$.ajax({
						url: $(this).attr('action'),
						type: 'post',
						data: {'email': data['emailRequest'], 'note': data['noteRequest']},
						dataType: 'json',
						headers: {
							'X-CSRFToken': csrf_token
						},
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data).length > 0) {
								console.log(data);
												// TODO: make errors
											}
											console.log(data[0].progress.percent);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);
										}
									});


					e.preventDefault();
				};
			</script>

			<script>
				$('#personPhoto[type="file"]').on('change', function(e) {
					var files = e.target.files;
					var fr = new FileReader();
					fr.onload = function () {
						$('#image').attr('src', fr.result);
					};
					fr.readAsDataURL(files[0]);
				});
				$('.recommendation-checkbox').on('change', function(e) {
					var url = $(this).parent().data('url');
					$.ajax({
						url: url,
						type: 'post',
						data: {'video': $(this).data('video'), 'state': $(this).prop('checked') ? 1 : 0},
						dataType: 'json',
						headers: {
							'X-CSRFToken': csrf_token
						},
						error: function(data, textStatus, errorThrown) {
							console.log(errorThrown);
						},
						success: function(data) {
							if (Object.keys(data).length > 0) {
								console.log(data);
												// TODO: make errors
											}
											console.log(data[0].progress.percent);
											$('.progress-bar').each(function(i, bar){
												$(bar).data('complete', data[0].progress.percent).attr('data-complete', data[0].progress.percent)
												setWidth(bar)
											});
											showCaption(data[0].progress.percent, data[0].progress.active);
										}
									});
				});
			</script>


			<script src="js/plugins/owl.carousel.min.js"></script>
			<script src="js/plugins/perfect-scrollbar.min.js"></script>
			<script src="js/plugins/jquery.magnific-popup.min.js"></script>
			<script src="js/plugins/jquery.maskedinput.min.js"></script>
			<script src="js/plugins/sortable.min.js"></script>
			<script src="js/plugins/cropper.min.js"></script>
			<script src="js/plugins/copy.min.js"></script>

			<!-- video js -->
			<script src="js/plugins/video.js"></script>
			<script src="js/plugins/videojs-markers.min.js"></script>

			<script src="js/main.js"></script>
			<script src="js/validator.js"></script>


			<script src="js/init/buttons.js"></script>
			<script src="js/init/data-onsubmit.js"></script>
			<script src="js/init/validation.js"></script>
			<script src="js/init/toggler.js"></script>
			<script src="js/init/main-menu-dropdown.js"></script>
			<script src="js/init/progress.js"></script>
			<script src="js/init/set-overview-size.js"></script>
			<script src="js/init/tabs.js"></script>
			<script src="js/init/read-more.js"></script>
			<script src="js/init/dropdown.js"></script>
			<script src="js/init/random-id.js"></script>

			<script src="js/init/limit-block.js"></script>
			<script src="js/init/fixed-elements.js"></script>
			<script src="js/init/mask.js"></script>
			<script src="js/init/sortable-drag.js"></script>
			<script src="js/init/clipboard-copy.js"></script>
			<script src="js/init/crop-image.js"></script>
			<script src="js/init/clear-image.js"></script>
			<script src="js/init/moveup-movedown.js"></script>
			<script src="js/init/notification.js"></script>
			<script src="js/init/keyword-search.js"></script>
			<script src="js/init/video-data.js"></script>
			<script src="js/init/data-onchange.js"></script>
			<script src="js/init/crop-init.js"></script>
			<script src="js/init/photo-popup.js"></script>
			<script src="js/init/data-to.js"></script>


			<!-- popup -->
			<script src="js/init/popup-helper.js"></script>
			<script src="js/init/edit-popup.js"></script>
			<script src="js/init/add-empty-item-popup.js"></script>

			<script src="js/init/popup-add-techskills.js"></script>
			<script src="js/init/popup-add-softskills.js"></script>
			<script src="js/init/popup-add-experience.js"></script>
			<script src="js/init/popup-add-language.js"></script>
			<script src="js/init/popup-add-interests.js"></script>


			<script src="js/init/popup-render-update-profile.js"></script>
			<script src="js/init/popups-update-profile.js"></script>
			<script src="js/init/popup-call.js"></script>


			<script>
				$('#cropOutput').change(function(e){
					$('.cropped-photo').attr('src', 'data:image/png;base64,'+$(this).val());
				});
			</script>


			<script src="js/init/editor-init.js"></script>
			<script>
				var csrf_token = 'token'
			</script>
		</body>
		</html>