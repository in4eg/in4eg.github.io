@import '../variables.scss';

.form {

	.form-group {
		position: relative;

		.label {
			display: block;
			font-size: var(--font-size-small);
			pointer-events: none;
		}

		.input-helper {
			position: absolute;
			right: 0; top: calc(100% + 4px);
			font-size: var(--font-size-small);
			color: $color-light-silver;
		}

		&.focused,
		&.error,
		&.success {

			.label {
				color: $color-dark-electric-blue;
				top: -12px; left: 0;
			}
		}

		&.disabled {
			pointer-events: none;

			.label,
			.checkbox-label,
			.radio-label {
				color: $color-gray;
			}
		}
	}

	.select-group {
		position: relative;

		.dropdown-header,
		.selecter .anchor {
			height: 56px;
			display: block;
		}

		&:before {
			content: '';
			position: absolute;
			top: 56px; left: 0;
			width: 100%; height: 1px;
			margin-top: -1px;
			background-color: $color-primary;
			transform-origin: center;
			transition: .3s;
			transform: scaleX(0.7);
			opacity: 0;
			z-index: 1;
		}

		&:hover {

			&:before {
				transform: scaleX(1);
				opacity: 1;
			}
		}

		.select {
			display: block;
			width: 100%;
			border: 0;
			border-bottom: 1px solid $color-light-silver;
			background-color: transparent;
			font-size: var(--font-size-small);
			padding: 16px 0;
			cursor: pointer;
			-webkit-appearance: none;
			-moz-appearance: textfield;
			overflow: -moz-hidden-unscrollable;
			background: url(../img/icons/select-chevron.png) no-repeat right;

			&.disabled {

				~ .selecter {
					pointer-events: none;
					user-select: none;
					color: $color-gray;

					.anchor {
						border-bottom-color: $color-spanish-gray;

						&:after {
							color: $color-gray;
						}
					}

					~ .label {
						color: $color-gray;
					}
				}
			}
		}

		.label {
			position: absolute;
			left: 0; top: 16px;
			transition: .2s;
		}

		&.focused {

			.selecter .anchor {
				color: $color-dark;
			}
		}
	}

	.input {
		display: block;
		width: 100%;
		border: 0;
		border-bottom: 1px solid $color-light-silver;
		background-color: transparent;
		font-size: var(--font-size-small);
		padding: 16px 0;

		&:focus {

			~ .label {
				color: $color-dark-electric-blue;
				top: -12px; left: 0;
			}
		}
	}

	.textarea {
		@extend .input;
		resize: none;
		height: 88px;
		padding-top: 0;
	}

	.alert {
		font-size: var(--font-size-small);
		color: $color-error;
		position: absolute;
		right: 0; top: -12px;
		transform: translateY(-5px);
		opacity: 0;
		transition: .2s;
	}

	.helper {
		font-size: var(--font-size-small);
	}

	.input-group {
		margin-bottom: 24px;
		position: relative;

		&:before {
			content: '';
			position: absolute;
			top: 100%; left: 0;
			width: 100%; height: 1px;
			margin-top: -1px;
			background-color: $color-primary;
			transform-origin: center;
			transition: .3s;
			transform: scaleX(0.7);
			opacity: 0;
			z-index: 1;
		}

		.label {
			position: absolute;
			left: 0; top: 16px;
			transition: .2s;
		}

		.input {
			@include placeholder(transparent);
		}

		&:hover {

			&:before {
				transform: scaleX(1);
				opacity: 1;
			}
		}

		&.error {

			.alert {
				opacity: 1;
				transform: translateY(0);
			}

			&:before {
				transform: scaleX(1);
				opacity: 1;
				background-color: $color-error;
			}
		}

		&.success {

			&:before {
				transform: scaleX(1);
				opacity: 1;
				background-color: $color-success;
			}
		}
	}

	.textarea-group {
		margin-bottom: 48px;
		padding-top: 16px;
	}

	.input-group-number {
		display: flex;
		gap: 24px;
		margin-bottom: 24px;

		input {
			font-size: 56px;
		}

		input::-webkit-outer-spin-button,
		input::-webkit-inner-spin-button {
			-webkit-appearance: none;

			margin: 0;
		}
	}
}

.selecter {
	font-size: var(--font-size-small);
	position: relative;

	.anchor {
		cursor: pointer;
		padding: 16px 0;
		display: block;
		border-bottom: 1px solid $color-light-silver;
		color: transparent;
		position: relative;

		&:after {
			content: '\e911';
			font-family: 'icomoon';
			position: absolute;
			right: 0; top: 50%;
			transform: translateY(-50%);
			transition: .2s;
			font-size: 24px;
			color: $color-dark;
		}
	}

	.dropdown {
		display: none;
		position: absolute;
		top: 100%; left: 0;
		width: 100%;
		z-index: 1;
		max-height: 200px;
		overflow: auto;
		display: none;
		z-index: 2;
		background-color: rgba($color-white, 0.9);
		backdrop-filter: blur(22px);
		box-shadow: rgba(14, 63, 126, 0.06) 0px 0px 0px 1px, rgba(42, 51, 70, 0.03) 0px 1px 1px -0.5px, rgba(42, 51, 70, 0.04) 0px 2px 2px -1px, rgba(42, 51, 70, 0.04) 0px 3px 3px -1.5px, rgba(42, 51, 70, 0.03) 0px 5px 5px -2.5px, rgba(42, 51, 70, 0.03) 0px 10px 10px -5px, rgba(42, 51, 70, 0.03) 0px 24px 24px -8px;

		ul {
			list-style: none;
			padding: 0;
			margin: 0;

			> li {
				padding: 0;
				margin: 0;
				cursor: pointer;
				padding: 4px 16px;
				transition: .2s;
				font-size: var(--font-size);

				&:hover,
				&.active {
					color: $color-primary;
				}
			}
		}
	}

	&.opened {

		.anchor {
			color: $color-dark;

			&:after {
				content: '\e910';
			}
		}

		.dropdown {
			display: block;
		}

		~ .label {
			color: $color-dark-electric-blue;
			top: -12px; left: 0;
		}
	}
}



// опційно: щоб легко підкручувати вертикальне вирівнювання "кулі"
$range-thumb-offset: 20px;

.range-group {
	position: relative;

	> .label {
		position: absolute;
		left: 0; top: 16px;
		opacity: 0;
		transition: .2s;
	}

	.range {
		position: relative;
		display: grid;
		align-self: end;
		padding-top: 56px;

		input[type="range"] {
			-webkit-appearance: none;
			appearance: none;
			position: absolute;
			inset: 0;
			background: transparent;
			pointer-events: none;
			z-index: 2;

			/* ===== WebKit (Chrome/Edge/Safari) ===== */
			&::-webkit-slider-thumb {
				-webkit-appearance: none;
				appearance: none;
				width: 24px; height: 24px;
				border-radius: 50%;
				background-color: $color-white;
				pointer-events: auto;
				border: 8px solid $color-primary;
				cursor: pointer;
				z-index: 1;
				position: relative;
				top: $range-thumb-offset; // як у тебе було: 20px
			}

			/* ===== Firefox ===== */
			&::-moz-range-track {
				height: 8px;
				background: transparent;
				border: 0;
			}
			&::-moz-range-progress {
				height: 8px;
				background: transparent;
			}
			&::-moz-range-thumb {
				width: 10px; height: 10px;
				border-radius: 50%;
				background-color: $color-white;
				border: 8px solid $color-primary;
				cursor: pointer;
				pointer-events: auto;
				transform: translateY(19px);
			}
			/* прибрати синє кільце фокусу навколо контролу в FF */
			&::-moz-focus-outer { border: 0; }
		}
	}

	.range-progress {
		position: relative;
		height: 24px;
	}

	.range-track {
		position: absolute;
		left: 0; right: 0;
		height: 8px;
		border-radius: 8px;
		background-color: $color-cadet-grey;
		pointer-events: none;
	}

	.range-fill {
		position: absolute;
		height: 8px;
		border-radius: 8px;
		background-color: $color-dark-electric-blue;
	}

	.range-inputs {
		display: flex;
		gap: 16px;

		.form-group {
			flex: 1;
			margin-bottom: 0;
		}

		.label {
			color: $color-dark-electric-blue;
			font-size: var(--font-size-small);
			position: static;
		}
	}

	.range-ticks {
		position: absolute;
		left: 0; right: 0;
		top: 20px;
		height: 24px;
		pointer-events: none;
		font-size: 12px;
		color: $color-cadet-grey;
		display: flex;
		justify-content: space-between;
	}

	.range-tick { white-space: nowrap; }

	&.focused {
		> .label {
			color: $color-dark-electric-blue;
			top: -12px; left: 0;
			opacity: 1;
		}
	}
}




.labeled-group {
	width: 100%;

	.label {
		font-size: var(--font-size-small);
		color: $color-primary;
		opacity: 1;
		position: static;
		margin-bottom: 8px;
	}

	.selecter .anchor {
		color: $color-dark;
	}

	.range-header {
		display: block;
		width: 100%;
		border: 0;
		border-bottom: 1px solid #d3d8d8;
		background-color: transparent;
		font-size: var(--font-size-small);
		padding: 16px 0;
		margin-bottom: 32px;
	}

	.icon-search {
		position: absolute;
		right: 0; top: 45px;
		font-size: 24px;
		border-radius: 0;
		background-color: transparent;
		backdrop-filter: none;
		color: $color-cadet-grey;
		width: 24px; height: 24px;
	}

	input:focus {

		~ .icon-search { color: $color-dark; }
	}
}

.calendar-group {

	.date-group {
		display: flex;
		gap: 24px;
		justify-content: space-between;

		.date-select {
			max-width: 100%;
			flex: 1;
		}
	}

	.date-select {

		.label {
			display: block;
		}
	}

	input[type="date"] {
		cursor: pointer;

		/* Chrome/Edge/Safari */
		&::-webkit-calendar-picker-indicator {
			background: url('../img/icons/calendar.svg') no-repeat center;
			background-size: 24px;
			opacity: 1;
		}

	}
}

.form-group.checkbox-group {
	position: relative;

	input[type="checkbox"] {
		opacity: 0;
		position: absolute;
		z-index: 1;
		left: 0; top: 0;

		&:checked ~ label:before {
			border-color: $color-primary-hover;
		}

		&:checked ~ label:after {
			opacity: 1;
		}

		&:checked ~ label {
			color: $color-primary;
		}
	}

	.checkbox-label {
		cursor: pointer;
		position: relative;
		margin-bottom: 0;
		color: $color-dark;
		display: inline-block;
		font-size: var(--font-size);
		padding-left: 40px;
		transition: .2s;

		&:before {
			position: absolute;
			content: "";
			height: 24px; width: 24px;
			border: 1px solid $color-light-silver;
			transition: 0.2s;
			top: 0; left: 0;
			z-index: 2;
		}

		&:after {
			content: "\e90d";
			font-family: 'icomoon';
			position: absolute;
			z-index: 3;
			left: 0px; top: -4px;
			font-size: 24px;
			opacity: 0;
		}

	}

	&:hover {

		.checkbox-label {
			cursor: pointer;
			color: $color-primary;
		}

		.label:before {
			border-color: $color-primary;
		}
	}
}

.form-group.radio-group {
	position: relative;

	input[type="radio"] {
		opacity: 0;
		position: absolute;
		z-index: 1;
		left: 0; top: 0;

		&:checked ~ label:before {
			border-color: $color-primary-hover;
		}

		&:checked ~ label:after {
			opacity: 1;
		}

		&:checked ~ label {
			color: $color-primary;
		}
	}

	.radio-label {
		cursor: pointer;
		position: relative;
		margin-bottom: 0;
		color: $color-dark;
		display: inline-block;
		font-size: var(--font-size);
		padding-left: 40px;
		transition: .2s;

		&:before {
			position: absolute;
			content: "";
			height: 24px; width: 24px;
			border: 1px solid $color-primary-hover;
			border-radius: 50%;
			transition: 0.2s;
			top: 0; left: 0;
			z-index: 2;
		}

		&:after {
			content: "";
			position: absolute;
			height: 12px; width: 12px;
			z-index: 3;
			left: 6px; top: 6px;
			background-color: $color-primary;
			opacity: 0;
			border-radius: 50%;
		}

	}

	&:hover {

		.radio-label {
			cursor: pointer;
			color: $color-primary;
		}

		.label:before {
			border-color: $color-primary;
		}
	}
}

.form.search-form {
	display: flex;
	gap: $column-gap;
	align-items: center;
	padding: 40px;
	border-radius: 100px;

	@include background-blur();

	> * {
		flex: 1;
	}

	.badge {
		position: absolute;
		top: -12px; left: 32px;
	}
}

.form.filters-form {
	position: relative;

	.icon-search {
		position: absolute;
		right: 0; bottom: 16px;
		font-size: 24px;
		border-radius: 0;
		background-color: transparent;
		backdrop-filter: none;
		color: $color-cadet-grey;
	}

	.focused {

		~ .icon-search { color: $color-primary; }
	}
}

@media (max-width: 1440px) {

	.form.search-form {
		padding: 32px;
		height: auto;
	}
}

@media (max-width: 1199px) {

	.calendar-group {

		.date-group {
			flex-direction: column;
		}

		.date-select .label {
			margin-bottom: 0;
		}

		input[type=date] {
			padding-top: 8px;
		}
	}
}

@media (max-width: 993px) {

	.form.search-form {
		flex-direction: column;
		border-radius: 40px;
		padding: 16px;
		margin: 24px 0;

		.badge {
			left: 16px;
			max-width: calc(100% - 32px);
		}

		.form-group {
			display: block;
			width: calc(100% - 48px);
			margin: 0 auto;
		}
	}

	.form .input-group-number {

		input {
			font-size: 40px;
		}
	}
}

@media (max-width: 425px) {

	.form.search-form {
		padding-top: 32px;

		.form-group {
			width: 100%;
		}
	}

	.form .input-group-number {

		input {
			font-size: 32px;
		}
	}
}

